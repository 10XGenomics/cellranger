# yaml-language-server: $schema=../lib/go/telemetry/config/telemetry_schema.json
---
config_version: 1
product: cellranger
version: "10.0.0"

groups:
  os_stats:
    when: command
  hardware_stats:
    when: command

  count_success:
    when: success
    subcommands:
      - count
    globs:
      lib_metrics: "SC_*/SC_MULTI_CORE/MULTI_REPORTER/SUMMARIZE_REPORTS/fork0/files/metrics_summary_json.json"
  multi_success:
    when: success
    subcommands:
      - multi
    globs:
      lib_metrics: "SC_*/SC_MULTI_CORE/MULTI_REPORTER/SUMMARIZE_REPORTS/fork0/files/metrics_summary_json.json"
  vdj_success:
    when: success
    subcommands:
      - vdj
    globs:
      lib_metrics: "SC_*/SC_MULTI_CORE/MULTI_REPORTER/SUMMARIZE_REPORTS/fork0/files/metrics_summary_json.json"
  aggr_success:
    when: success
    subcommands:
      - aggr
    globs:
      aggr_metrics: "SC_RNA_AGGREGATOR_CS/COUNT_AGGR/SC_RNA_AGGREGATOR/SUMMARIZE_AGGREGATED_REPORTS/fork0/files/summary.json"
  annotate_success:
    when: success
    subcommands:
      - annotate
  reanalyze_success:
    when: success
    subcommands:
      - reanalyze
  mkvdjref_success:
    when: success
    subcommands:
      - mkvdjref
  mkfastq_success:
    when: success
    subcommands:
      - mkfastq
  mkref_success:
    when: success
    subcommands:
      - mkref

  count_failure:
    when: failure
    subcommands:
      - count
  multi_failure:
    when: failure
    subcommands:
      - multi
  vdj_failure:
    when: failure
    subcommands:
      - vdj
  aggr_failure:
    when: failure
    subcommands:
      - aggr
  annotate_failure:
    when: failure
    subcommands:
      - annotate
  reanalyze_failure:
    when: failure
    subcommands:
      - reanalyze
  mkvdjref_failure:
    when: failure
    subcommands:
      - mkvdjref
  mkfastq_failure:
    when: failure
    subcommands:
      - mkfastq
  mkref_failure:
    when: failure
    subcommands:
      - mkref

  library_metrics_vdj:
    when: success
    subcommands:
      - multi
      - vdj
    globs:
      vdj_lib_metrics: "SC_*/SC_MULTI_CORE/MULTI_GEM_WELL_PROCESSOR/VDJ_*_GEM_WELL_PROCESSOR/LIB_VDJ_ANALYZER/SUMMARIZE_VDJ_REPORTS/fork0/files/metrics_summary_json.json"

  sample_metrics:
    when: success
    subcommands:
      - multi
    globs:
      sample_metrics: "SC_*/SC_MULTI_CORE/SANITIZE_MAP_CALLS/fork0/files/*_summary.json"

  sample_metrics_vdj:
    when: success
    subcommands:
      - multi
    globs:
      vdj_sample_metrics: "SC_*/SC_MULTI_CORE/MULTI_GEM_WELL_PROCESSOR/VDJ_*_GEM_WELL_PROCESSOR/PER_SAMPLE_VDJ_ANALYZER/SUMMARIZE_VDJ_REPORTS/*/files/metrics_summary_json.json"

presets:
  filesystem:
    match:
      - key: wsl
        exp: >-
          \b(?:(?:9p)|(?:lxfs))\b
      - key: local
        exp: >-
          \b(?:(?:ext[34])|(?:(?:btr|x|z)fs))\b
      - exp: "\\bnfs"
      - exp: "lustre"
      # Usually means docker
      - exp: "overlay"
      - exp: squashfs
      - exp: panfs
      - exp: gpfs
      - exp: beegfs
      - exp: cifs
      - exp: ceph
      - exp: "fat\\b"
      - exp: "\\bfuse"
  chemistry:
    match:
      - key: auto
        exp: "(?i)^auto$"
      - key: custom
        exp: "(?i)^custom$"
      - key: threeprime
        exp: "(?i)^threeprime$"
      - key: fiveprime
        exp: "(?i)^fiveprime$"
      - key: sc3pv1
        exp: "(?i)^sc3pv1$"
      - key: sc3pv2
        exp: "(?i)^sc3pv2$"
      - key: sc3pv3-polya
        exp: "(?i)^sc3pv3-polya$"
      - key: sc3pv3-cs1
        exp: "(?i)^sc3pv3-cs1$"
      - key: sc3pv4-polya
        exp: "(?i)^sc3pv4-polya$"
      - key: sc3pv4-cs1
        exp: "(?i)^sc3pv4-cs1$"
      - key: sc3pv4-polya-ocm
        exp: "(?i)^sc3pv4-polya-ocm$"
      - key: sc3pv4-cs1-ocm
        exp: "(?i)^sc3pv4-cs1-ocm$"
      - key: sc3pv3lt
        exp: "(?i)^sc3pv3lt$"
      - key: sc3pv3ht-polya
        exp: "(?i)^sc3pv3ht-polya$"
      - key: sc3pv3ht-cs1
        exp: "(?i)^sc3pv3ht-cs1$"
      - key: sc5p-pe
        exp: "(?i)^sc5p-?pe$"
      - key: sc5p-pe-v3
        exp: "(?i)^sc5p-?pe-?v3$"
      - key: sc5p-pe-ocm-v3
        exp: "(?i)^sc5p-?pe-?ocm-?v3$"
      - key: sc5p-r2
        exp: "(?i)^sc5p-?r2$"
      - key: sc5p-r2-v3
        exp: "(?i)^sc5p-?r2-?v3$"
      - key: sc5p-r2-ocm-v3
        exp: "(?i)^sc5p-?r2-?ocm-?v3$"
      - key: sc5pht
        exp: "(?i)^sc5pht$"
      - key: sc-fb
        exp: "(?i)^sc-?fb$"
      - key: sfrp
        exp: "(?i)^sfrp$"
      - key: sfrp-no-trim-r2
        exp: "(?i)^sfrp-no-trim-r2$"
      - key: mfrp-rna
        exp: "(?i)^mfrp-rna$"
      - key: mfrp-ab
        exp: "(?i)^mfrp-ab$"
      - key: mfrp-crispr
        exp: "(?i)^mfrp-crispr$"
      - key: mfrp-47
        exp: "(?i)^mfrp-47$"
      - key: mfrp-96-r1
        exp: "(?i)^mfrp-96-r1$"
      - key: mfrp-96-rna-r2
        exp: "(?i)^mfrp-96-rna-r2$"
      - key: mfrp-uncollapsed
        exp: "(?i)^mfrp-uncollapsed$"
      - key: mfrp-rna-r1
        exp: "(?i)^mfrp-rna-r1$"
      - key: mfrp-ab-r1
        exp: "(?i)^mfrp-ab-r1$"
      - key: mfrp-ab-r2pos50
        exp: "(?i)^mfrp-ab-r2pos50$"
      - key: mfrp-r1-48-uncollapsed
        exp: "(?i)^mfrp-r1-48-uncollapsed$"
      - key: mfrp-r1-no-trim-r2
        exp: "(?i)^mfrp-r1-no-trim-r2$"
      - key: flex-v2-96-r1
        exp: "(?i)^flex-v2-96-r1$"
      - key: flex-v2-96-rna-r2
        exp: "(?i)^flex-v2-96-rna-r2$"
      - key: flex-v2-r1
        exp: "(?i)^flex-v2-r1$"
      - key: flex-v2-rna-r2
        exp: "(?i)^flex-v2-rna-r2$"
      - key: flex-v2-ab-r2:45
        exp: "(?i)^flex-v2-ab-r2:45$"
      - key: flex-v2-ab-r2:64
        exp: "(?i)^flex-v2-ab-r2:64$"
      - key: flex-v2-crispr-r2:1
        exp: "(?i)^flex-v2-crispr-r2:1$"
      - key: flex-v2-singleplex
        exp: "(?i)^flex-v2-singleplex$"
      - key: arc-v1
        exp: "(?i)^arc-v1$"
      # Chemistry sets
      - key: mfrp
        exp: "(?i)^mfrp$"
      - key: mfrp-r1
        exp: "(?i)^mfrp-r1$"
      - key: flex-v2-r2
        exp: "(?i)^flex-v2-r2$"
      - key: sc3pv3
        exp: "(?i)^sc3pv3$"
      - key: sc3pv3ht
        exp: "(?i)^sc3pv3ht$"
      - key: sc3pv4
        exp: "(?i)^sc3pv4$"
      - key: sc3pv4ocm
        exp: "(?i)^sc3pv4ocm$"
      - key: unknown
        exp: ".*"

metrics:
  # OS stats

  - name: event_count
    groups:
      - os_stats
      - hardware_stats
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    recent_count: os_stats
    values:
      exponential:
        multiple: 2
        min: 3
        max: 768

  - name: glibc
    groups: os_stats
    special: glibc
    values:
      semver_thresholds:
        - "2.12"
        - "2.17"
        - "2.28"
        - "2.34"

  - name: kernel
    groups: os_stats
    special: kernel
    values:
      semver_thresholds:
        - "3.10" # centos/rhel 7
        - "4.4" # Ubunut 16
        - "4.15" # Ubuntu 18
        - "4.18" # rhel 8
        - "5.4" # Ubuntu 20
        - "5.14" # rhel 9
        - "5.15" # Ubuntu 22

  - name: distro
    groups: os_stats
    special: distro

  - name: container
    groups: os_stats
    special: container

  - name: cgroup_memory_soft_limit
    groups: os_stats
    file_content:
      cgroup: "memory"
      path:
        - memory.soft_limit_in_bytes
        - memory.memsw.soft_limit_in_bytes
        - memory.high
      line: "[0-9]+"
    values:
      exponential:
        multiple: 2
        min: 1073741824

  - name: cgroup_memory_hard_limit
    groups: os_stats
    file_content:
      cgroup: "memory"
      path:
        - memory.limit_in_bytes
        - memory.memsw.limit_in_bytes
        - memory.max
      line: "[0-9]+"
    values:
      exponential:
        multiple: 2
        min: 1073741824

  - name: bin_filesystem
    filesystem:
      which: bins
      property: type
    groups: os_stats
    preset: filesystem

  - name: pipestance_filesystem
    filesystem:
      which: pipestance
      property: type
    groups:
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    preset: filesystem

  - name: process_ulimit
    groups: os_stats
    rlimit:
      resource: nproc
    values:
      thresholds:
        - 1024
        - 2048
        - 65536
        - 131072

  - name: vmem_ulimit
    groups: os_stats
    rlimit:
      resource: as
    values:
      thresholds:
        - 1024
        - 2048
        - 65536
        - 131072

  - name: transparent_huge_pages
    groups: os_stats
    file_content:
      path: /sys/kernel/mm/transparent_hugepage/enabled
      line: >-
        \[(\w+)\]
    values:
      match:
        - exp: always
        - exp: madvise
        - exp: never

  # Hardware stats: CPU info
  - name: cpu_mfg
    file_content:
      path: /proc/cpuinfo
      line: >-
        vendor_id\s*:\s*(\S*)
    groups:
      - hardware_stats
    values:
      match:
        - exp: "(?i:Intel)"
        - exp: "(?i:AMD)"

  - name: avx
    file_content:
      path: /proc/cpuinfo
      line: >-
        flags\s*:\s*(.*)
    groups: hardware_stats
    values:
      match:
        - exp: "\\bavx512"
        - exp: "\\bavx2\\b"
        - exp: "\\bavx\\b"

  - name: processor_count
    # technically this is vCPU count - 1, because they're numbered from 0.
    groups:
      - hardware_stats
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    file_content:
      path: /proc/cpuinfo
      last_line: >-
        processor\s*:\s*(\d+)
    values:
      thresholds:
        - 7
        - 15
        - 23
        - 31
        - 47
        - 65
        - 95
        - 127

  - name: socket_count
    # technically this is socket count - 1, because they're numbered from 0.
    groups: hardware_stats
    file_content:
      path: /proc/cpuinfo
      last_line: >-
        physical id\s*:\s*(\d+)
    values:
      thresholds:
        - 0
        - 1
        - 3
  - name: cores_per_socket
    groups: hardware_stats
    file_content:
      path: /proc/cpuinfo
      line: >-
        cpu cores\s*:\s*(\d+)
    values:
      thresholds:
        - 4
        - 8
        - 12
        - 16
        - 24
        - 32

  # Hardware stats: memory
  - name: memory
    groups:
      - hardware_stats
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    file_content:
      path: /proc/meminfo
      line: >-
        ^MemTotal:\s*([0-9]+)
    values:
      exponential:
        multiple: 2
        min: 8388608

  # Failure information
  - name: failed_stage
    groups:
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    special: failed_stage
  - name: error
    groups:
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    file_content:
      path: _errors
      stage_relative: true
      # match the first line that starts with a non-whitespace character
      line: >-
        ^\S.+
    values:
      match:
        - exp: >-
            ^\S+Error:
          key: python exception
        - exp: "not queued or running"
          key: cluster failure
        - exp: "TXRNGR10001"
        - exp: "TXRNGR10002"
        - exp: "TXRNGR10003"
        - exp: "TXRNGR10004"
        - exp: "TXRNGR10005"
        - exp: "TXRNGR10006"
        - exp: "TXRNGR10007"
        - exp: "TXRNGR10008"
        - exp: "TXRNGR10009"
        - exp: "TXRNGR10010"
        - exp: "TXRNGR10011"
        - exp: "TXRNGR10012"
        - exp: "TXRNGR10013"
        - exp: "TXRNGR10014"
        - exp: "TXRNGR10015"
        - exp: "TXRNGR10017"
        - exp: "TXRNGR10019"
        - exp: "TXRNGR10020"

  - name: subcommand
    groups:
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    special: subcommand

  # count CLI args

  - name: expect_cells
    groups:
      - count_success
      - count_failure
    flag: --expect-cells
    values:
      float: true

  - name: force_cells
    groups:
      - count_success
      - count_failure
    flag: --force-cells
    values:
      float: true

  - name: create_bam
    groups:
      - count_success
      - count_failure
    flag: --create-bam
    values:
      boolean: true

  - name: no_bam
    groups:
      - count_success
      - count_failure
    flag: --no-bam
    values:
      boolean: true

  - name: nosecondary
    groups:
      - count_success
      - count_failure
    flag: --nosecondary
    values:
      boolean: true

  - name: r1_length
    groups:
      - count_success
      - count_failure
    flag: --r1-length
    values:
      float: true

  - name: r2_length
    groups:
      - count_success
      - count_failure
    flag: --r2-length
    values:
      float: true

  - name: include_introns
    groups:
      - count_success
      - count_failure
    flag: --include-introns
    values:
      boolean: true

  - name: chemistry
    groups:
      - count_success
      - count_failure
    flag: --chemistry
    preset: chemistry

  - name: no_libraries
    groups:
      - count_success
      - count_failure
    flag: --no-libraries
    values:
      boolean: true

  - name: check_library_compatibility
    groups:
      - count_success
      - count_failure
    flag: --check-library-compatibility
    values:
      boolean: true

  - name: filter_aggregates
    groups:
      - count_success
      - count_failure
    flag: --filter-aggregates
    values:
      boolean: true

  - name: min-crispr-umi
    groups:
      - count_success
      - count_failure
    flag: --min-crispr-umi
    values:
      float: true

  # vdj CLI args

  - name: denovo
    groups:
      - vdj_success
      - vdj_failure
    flag: --denovo
    values:
      boolean: true

  - name: skip_clonotyping
    groups:
      - vdj_success
      - vdj_failure
    flag: --skip-clonotyping
    values:
      boolean: true

  - name: chain
    groups:
      - vdj_success
      - vdj_failure
    flag: --chain
    values:
      match:
        - key: auto
          exp: ^auto$
        - key: TR
          exp: ^TR$
        - key: IG
          exp: ^IG$
        - key: TR_GD
          exp: ^TR_GD$

  # shared mkref args

  - name: memgb
    groups:
      - mkref_success
      - mkref_failure
      - mkvdjref_success
      - mkvdjref_failure
    flag: --memgb
    values:
      float: true

  - name: nthreads
    groups:
      - mkref_success
      - mkref_failure
      - mkvdjref_success
      - mkvdjref_failure
    flag: --nthreads
    values:
      float: true

  # aggr CLI args

  - name: normalize
    groups:
      - aggr_success
      - aggr_failure
    flag: --normalize
    values:
      match:
        - key: mapped
          exp: ^mapped$
        - key: none
          exp: ^none$

  - name: nosecondary
    groups:
      - aggr_success
      - aggr_failure
    flag: --normalize
    values:
      boolean: true

  - name: min-crispr-umi
    groups:
      - aggr_success
      - aggr_failure
    flag: --min-crispr-umi
    values:
      float: true

  - name: enable-tsne
    groups:
      - aggr_success
      - aggr_failure
    flag: --enable-tsne
    values:
      boolean: true

  # multi config CSV in JSON format

  - name: emptydrops_minimum_umis
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - emptydrops_minimum_umis
    values:
      float: true

  - name: global_minimum_umis
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - global_minimum_umis
    values:
      float: true

  - name: gene_expression_r1_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - r1_length
    values:
      float: true

  - name: gene_expression_r2_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - r2_length
    values:
      float: true

  - name: chemistry
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - chemistry
    preset: chemistry

  - name: expect_cells
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - expect_cells
    values:
      float: true

  - name: force_cells
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - force_cells
    values:
      float: true

  - name: nosecondary
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - nosecondary
    values:
      boolean: true

  - name: include_introns
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - include_introns
    values:
      boolean: true

  - name: check_library_compatibility
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - check_library_compatibility
    values:
      boolean: true

  - name: aligner
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - aligner
    values:
      match:
        - key: hurtle
          exp: ^hurtle$
        - key: star
          exp: ^star$

  - name: create_bam
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - create_bam
    values:
      boolean: true

  - name: filter_probes
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - filter_probes
    values:
      boolean: true

  - name: filter_high_occupancy_gems
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - filter_high_occupancy_gems
    values:
      boolean: true

  - name: min_assignment_confidence
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - min_assignment_confidence
    values:
      float: true

  - name: skip_cell_annotation
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - skip_cell_annotation
    values:
      boolean: true

  - name: detect_chemistry_sample_reads
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - detect_chemistry_sample_reads
    values:
      float: true

  - name: detect_chemistry_total_reads
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - detect_chemistry_total_reads
    values:
      float: true

  - name: umi_min_read_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - umi_min_read_length
    values:
      float: true

  - name: min_major_probe_bc_frac
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - gene_expression
        - min_major_probe_bc_frac
    values:
      float: true

  - name: feature_r1_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - feature
        - r1_length
    values:
      float: true

  - name: feature_r2_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - feature
        - r2_length
    values:
      float: true

  - name: filter_aggregates
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - feature
        - filter_aggregates
    values:
      boolean: true

  - name: min_crispr_umi
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - feature
        - min_crispr_umi
    values:
      float: true

  - name: crispr_probe_barcode_location
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - feature
        - crispr_probe_barcode_location
    values:
      float: true

  - name: r1_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - r1_length
    values:
      float: true

  - name: r2_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - r2_length
    values:
      float: true

  - name: multiplet_filter
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - multiplet_filter
    values:
      boolean: true

  - name: shared_contig_filter
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - shared_contig_filter
    values:
      boolean: true

  - name: umi_baseline_filter
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - umi_baseline_filter
    values:
      boolean: true

  - name: min_contig_length
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - min_contig_length
    values:
      float: true

  - name: skip_clonotyping
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - skip_clonotyping
    values:
      boolean: true

  - name: max_reads_per_barcode
    groups:
      - multi_success
      - multi_failure
    file_content:
      flag: --csv
      converter: multicsv
      json_path:
        - vdj
        - max_reads_per_barcode
    values:
      float: true

  # collect for all pipelines on success
  - name: runtime
    groups:
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    special: runtime
    values:
      float: true

  - name: core_hours
    groups:
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
    file_content:
      path: _perf
      json_path:
        - forks
        - fork_stats
        - core_hours
    values:
      float: true

  - name: utime
    groups:
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
    file_content:
      path: _perf
      json_path:
        - forks
        - fork_stats
        - usertime
    values:
      float: true

  - name: disk_hwm
    groups:
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
    file_content:
      path: _perf
      json_path:
        - maxbytes
    values:
      exponential:
        multiple: 2
        min: 1

  - name: jobmode
    groups:
      - count_success
      - multi_success
      - vdj_success
      - aggr_success
      - annotate_success
      - reanalyze_success
      - mkvdjref_success
      - mkfastq_success
      - mkref_success
      - count_failure
      - multi_failure
      - vdj_failure
      - aggr_failure
      - annotate_failure
      - reanalyze_failure
      - mkvdjref_failure
      - mkfastq_failure
      - mkref_failure
    mro_flag: --jobmode
    values:
      match:
        - exp: local
        - exp: lsf
        - exp: pbspro
        - exp: sge
        - exp: slurm
        - exp: torque

  # result of chemistry detection at the per-library level
  - name: GEX_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - Gene Expression
        - name
    preset: chemistry
  - name: ANTIBODY_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - Antibody Capture
        - name
    preset: chemistry
  - name: ANTIGEN_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - Antigen Capture
        - name
    preset: chemistry
  - name: CRISPR_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - CRISPR Guide Capture
        - name
    preset: chemistry
  - name: MULTIPLEXING_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - Multiplexing Capture
        - name
    preset: chemistry
  - name: Custom_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - Custom
        - name
    preset: chemistry
  - name: VDJ_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - VDJ
        - name
    preset: chemistry
  - name: VDJ_B_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - VDJ-B
        - name
    preset: chemistry
  - name: VDJ_T_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - VDJ-T
        - name
    preset: chemistry
  - name: VDJ_T_GD_chemistry
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path:
        - chemistry_defs
        - VDJ-T-GD
        - name
    preset: chemistry

  # aggr pipeline metrics
  - name: samples_count
    groups:
      - aggr_success
    file_content:
      path: ${aggr_metrics}
      json_path: samples_count
    values:
      float: true
  # count/multi/vdj pipeline metrics
  - name: chemistry_name
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: chemistry_name
    preset: chemistry
  - name: ANTIBODY_bc_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_bc_bases_with_q30_frac
    values:
      float: true
  - name: ANTIBODY_bc_bases_with_q30_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_bc_bases_with_q30_in_gel_bead_frac
    values:
      float: true
  - name: ANTIBODY_bc_bases_with_q30_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_bc_bases_with_q30_in_probe_frac
    values:
      float: true
  - name: ANTIBODY_feature_reads_in_cells
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_feature_reads_in_cells
    values:
      float: true
  - name: ANTIBODY_filtered_bcs_transcriptome_union
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_filtered_bcs_transcriptome_union
    values:
      float: true
  - name: ANTIBODY_frac_feature_reads_usable
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_frac_feature_reads_usable
    values:
      float: true
  - name: ANTIBODY_good_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_good_bc_frac
    values:
      float: true
  - name: ANTIBODY_good_bc_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_good_bc_in_gel_bead_frac
    values:
      float: true
  - name: ANTIBODY_good_bc_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_good_bc_in_probe_frac
    values:
      float: true
  - name: ANTIBODY_good_umi_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_good_umi_frac
    values:
      float: true
  - name: ANTIBODY_multi_cdna_pcr_dupe_reads_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_multi_cdna_pcr_dupe_reads_frac
    values:
      float: true
  - name: ANTIBODY_read_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_read_bases_with_q30_frac
    values:
      float: true
  - name: ANTIBODY_reads_lost_to_aggregate_GEMs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_reads_lost_to_aggregate_GEMs
    values:
      float: true
  - name: ANTIBODY_reads_per_cell
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_reads_per_cell
    values:
      float: true
  - name: ANTIBODY_recognized_feature_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_recognized_feature_bc_frac
    values:
      float: true
  - name: ANTIBODY_total_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_total_read_pairs
    values:
      float: true
  - name: ANTIBODY_umi_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_umi_bases_with_q30_frac
    values:
      float: true
  - name: ANTIBODY_unprocessed_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIBODY_unprocessed_read_pairs
    values:
      float: true
  - name: ANTIGEN_bc_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_bc_bases_with_q30_frac
    values:
      float: true
  - name: ANTIGEN_bc_bases_with_q30_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_bc_bases_with_q30_in_gel_bead_frac
    values:
      float: true
  - name: ANTIGEN_bc_bases_with_q30_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_bc_bases_with_q30_in_probe_frac
    values:
      float: true
  - name: ANTIGEN_feature_reads_in_cells
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_feature_reads_in_cells
    values:
      float: true
  - name: ANTIGEN_good_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_good_bc_frac
    values:
      float: true
  - name: ANTIGEN_good_umi_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_good_umi_frac
    values:
      float: true
  - name: ANTIGEN_multi_cdna_pcr_dupe_reads_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_multi_cdna_pcr_dupe_reads_frac
    values:
      float: true
  - name: ANTIGEN_read_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_read_bases_with_q30_frac
    values:
      float: true
  - name: ANTIGEN_reads_per_cell
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_reads_per_cell
    values:
      float: true
  - name: ANTIGEN_total_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_total_read_pairs
    values:
      float: true
  - name: ANTIGEN_umi_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_umi_bases_with_q30_frac
    values:
      float: true
  - name: ANTIGEN_unprocessed_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: ANTIGEN_unprocessed_read_pairs
    values:
      float: true
  - name: CRISPR_bc_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_bc_bases_with_q30_frac
    values:
      float: true
  - name: CRISPR_bc_bases_with_q30_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_bc_bases_with_q30_in_gel_bead_frac
    values:
      float: true
  - name: CRISPR_bc_bases_with_q30_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_bc_bases_with_q30_in_probe_frac
    values:
      float: true
  - name: CRISPR_feature_bc_extracted_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_feature_bc_extracted_frac
    values:
      float: true
  - name: CRISPR_feature_reads_in_cells
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_feature_reads_in_cells
    values:
      float: true
  - name: CRISPR_frac_feature_reads_usable
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_frac_feature_reads_usable
    values:
      float: true
  - name: CRISPR_good_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_good_bc_frac
    values:
      float: true
  - name: CRISPR_good_bc_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_good_bc_in_gel_bead_frac
    values:
      float: true
  - name: CRISPR_good_bc_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_good_bc_in_probe_frac
    values:
      float: true
  - name: CRISPR_good_umi_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_good_umi_frac
    values:
      float: true
  - name: CRISPR_multi_cdna_pcr_dupe_reads_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_multi_cdna_pcr_dupe_reads_frac
    values:
      float: true
  - name: CRISPR_read_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_read_bases_with_q30_frac
    values:
      float: true
  - name: CRISPR_reads_per_cell
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_reads_per_cell
    values:
      float: true
  - name: CRISPR_recognized_feature_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_recognized_feature_bc_frac
    values:
      float: true
  - name: CRISPR_total_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_total_read_pairs
    values:
      float: true
  - name: CRISPR_umi_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_umi_bases_with_q30_frac
    values:
      float: true
  - name: CRISPR_unprocessed_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_unprocessed_read_pairs
    values:
      float: true
  - name: CRISPR_unrecognized_feature_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: CRISPR_unrecognized_feature_bc_frac
    values:
      float: true
  - name: Custom_bc_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_bc_bases_with_q30_frac
    values:
      float: true
  - name: Custom_bc_bases_with_q30_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_bc_bases_with_q30_in_gel_bead_frac
    values:
      float: true
  - name: Custom_bc_bases_with_q30_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_bc_bases_with_q30_in_probe_frac
    values:
      float: true
  - name: Custom_feature_reads_in_cells
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_feature_reads_in_cells
    values:
      float: true
  - name: Custom_good_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_good_bc_frac
    values:
      float: true
  - name: Custom_good_umi_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_good_umi_frac
    values:
      float: true
  - name: Custom_multi_cdna_pcr_dupe_reads_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_multi_cdna_pcr_dupe_reads_frac
    values:
      float: true
  - name: Custom_read_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_read_bases_with_q30_frac
    values:
      float: true
  - name: Custom_reads_per_cell
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_reads_per_cell
    values:
      float: true
  - name: Custom_total_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_total_read_pairs
    values:
      float: true
  - name: Custom_umi_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_umi_bases_with_q30_frac
    values:
      float: true
  - name: Custom_unprocessed_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: Custom_unprocessed_read_pairs
    values:
      float: true
  - name: MULTIPLEXING_bc_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_bc_bases_with_q30_frac
    values:
      float: true
  - name: MULTIPLEXING_bc_bases_with_q30_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_bc_bases_with_q30_in_gel_bead_frac
    values:
      float: true
  - name: MULTIPLEXING_bc_bases_with_q30_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_bc_bases_with_q30_in_probe_frac
    values:
      float: true
  - name: MULTIPLEXING_feature_reads_in_cells
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_feature_reads_in_cells
    values:
      float: true
  - name: MULTIPLEXING_good_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_good_bc_frac
    values:
      float: true
  - name: MULTIPLEXING_good_umi_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_good_umi_frac
    values:
      float: true
  - name: MULTIPLEXING_multi_cdna_pcr_dupe_reads_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_multi_cdna_pcr_dupe_reads_frac
    values:
      float: true
  - name: MULTIPLEXING_read_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_read_bases_with_q30_frac
    values:
      float: true
  - name: MULTIPLEXING_reads_per_cell
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_reads_per_cell
    values:
      float: true
  - name: MULTIPLEXING_total_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_total_read_pairs
    values:
      float: true
  - name: MULTIPLEXING_umi_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_umi_bases_with_q30_frac
    values:
      float: true
  - name: MULTIPLEXING_unprocessed_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: MULTIPLEXING_unprocessed_read_pairs
    values:
      float: true
  - name: bc_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: bc_bases_with_q30_frac
    values:
      float: true
  - name: bc_bases_with_q30_in_gel_bead_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: bc_bases_with_q30_in_gel_bead_frac
    values:
      float: true
  - name: bc_bases_with_q30_in_probe_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: bc_bases_with_q30_in_probe_frac
    values:
      float: true
  - name: filtered_bcs_transcriptome_union
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: filtered_bcs_transcriptome_union
    values:
      float: true
  - name: good_bc_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: good_bc_frac
    values:
      float: true
  - name: good_umi_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: good_umi_frac
    values:
      float: true
  - name: multi_cdna_pcr_dupe_reads_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: multi_cdna_pcr_dupe_reads_frac
    values:
      float: true
  - name: read_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: read_bases_with_q30_frac
    values:
      float: true
  - name: reads_per_cell
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: reads_per_cell
    values:
      float: true
  - name: sample_tags_count
    groups:
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: sample_tags_count
    values:
      float: true
  - name: sample_multiplexing_method
    groups:
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: sample_multiplexing_method
    values:
      match:
        - exp: None
        - exp: RTL
        - exp: OH
        - exp: CMO
        - exp: Hashtag
  - name: samples_with_any_singlets
    groups:
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: samples_with_any_singlets
    values:
      float: true
  - name: total_cell_associated_partitions
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: total_cell_associated_partitions
    values:
      float: true
  - name: total_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: total_read_pairs
    values:
      float: true
  - name: umi_bases_with_q30_frac
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: umi_bases_with_q30_frac
    values:
      float: true
  - name: unprocessed_read_pairs
    groups:
      - count_success
      - multi_success
      - vdj_success
    file_content:
      path: ${lib_metrics}
      json_path: unprocessed_read_pairs
    values:
      float: true
  - name: raw_matrix_barcodes_count
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: raw_matrix_barcodes_count
    values:
      float: true
  - name: raw_matrix_features_count
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: raw_matrix_features_count
    values:
      float: true
  - name: raw_matrix_nonzero_entries_count
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: raw_matrix_nonzero_entries_count
    values:
      float: true
  - name: filtered_matrix_barcodes_count
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: filtered_matrix_barcodes_count
    values:
      float: true
  - name: filtered_matrix_features_count
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: filtered_matrix_features_count
    values:
      float: true
  - name: filtered_matrix_nonzero_entries_count
    groups:
      - count_success
      - multi_success
    file_content:
      path: ${lib_metrics}
      json_path: filtered_matrix_nonzero_entries_count
    values:
      float: true

  # VDJ library metrics

  - name: IGH_vdj_recombinome_mapped_reads_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: IGH_vdj_recombinome_mapped_reads_frac
    values:
      float: true
  - name: IGK_vdj_recombinome_mapped_reads_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: IGK_vdj_recombinome_mapped_reads_frac
    values:
      float: true
  - name: IGL_vdj_recombinome_mapped_reads_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: IGL_vdj_recombinome_mapped_reads_frac
    values:
      float: true
  - name: TRA_vdj_recombinome_mapped_reads_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: TRA_vdj_recombinome_mapped_reads_frac
    values:
      float: true
  - name: TRB_vdj_recombinome_mapped_reads_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: TRB_vdj_recombinome_mapped_reads_frac
    values:
      float: true
  - name: VDJ_bc_bases_with_q30_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: VDJ_bc_bases_with_q30_frac
    values:
      float: true
  - name: VDJ_read_bases_with_q30_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: VDJ_read_bases_with_q30_frac
    values:
      float: true
  - name: VDJ_total_read_pairs
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: VDJ_total_read_pairs
    values:
      float: true
  - name: VDJ_umi_bases_with_q30_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: VDJ_umi_bases_with_q30_frac
    values:
      float: true
  - name: VDJ_unprocessed_read_pairs
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: VDJ_unprocessed_read_pairs
    values:
      float: true
  - name: multi_vdj_recombinome_mapped_reads_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: multi_vdj_recombinome_mapped_reads_frac
    values:
      float: true
  - name: vdj_assemblable_read_pairs_per_filtered_bc
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: vdj_assemblable_read_pairs_per_filtered_bc
    values:
      float: true
  - name: vdj_filtered_bcs
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: vdj_filtered_bcs
    values:
      float: true
  - name: vdj_filtered_bcs_cum_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: vdj_filtered_bcs_cum_frac
    values:
      float: true
  - name: vdj_good_bc_frac
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: vdj_good_bc_frac
    values:
      float: true
  - name: vdj_total_raw_read_pairs_per_filtered_bc
    groups: library_metrics_vdj
    file_content:
      path: ${vdj_lib_metrics}
      json_path: vdj_total_raw_read_pairs_per_filtered_bc
    values:
      float: true

  # Sample-level metrics.

  - name: ANTIBODY_feature_reads_in_cells
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIBODY_feature_reads_in_cells
    values:
      float: true
  - name: ANTIBODY_multi_filtered_bcs
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIBODY_multi_filtered_bcs
    values:
      float: true
  - name: ANTIBODY_multi_filtered_bcs_median_counts
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIBODY_multi_filtered_bcs_median_counts
    values:
      float: true
  - name: ANTIBODY_multi_usable_reads_per_filtered_bc
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIBODY_multi_usable_reads_per_filtered_bc
    values:
      float: true
  - name: ANTIBODY_reads_lost_to_aggregate_GEMs
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIBODY_reads_lost_to_aggregate_GEMs
    values:
      float: true
  - name: ANTIBODY_recognized_feature_bc_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIBODY_recognized_feature_bc_frac_in_filtered_barcodes
    values:
      float: true
  - name: ANTIBODY_total_read_pairs_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIBODY_total_read_pairs_in_filtered_barcodes
    values:
      float: true
  - name: ANTIGEN_feature_reads_in_cells
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIGEN_feature_reads_in_cells
    values:
      float: true
  - name: ANTIGEN_multi_filtered_bcs
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIGEN_multi_filtered_bcs
    values:
      float: true
  - name: ANTIGEN_multi_filtered_bcs_median_counts
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIGEN_multi_filtered_bcs_median_counts
    values:
      float: true
  - name: ANTIGEN_multi_usable_reads_per_filtered_bc
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIGEN_multi_usable_reads_per_filtered_bc
    values:
      float: true
  - name: ANTIGEN_total_read_pairs_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: ANTIGEN_total_read_pairs_in_filtered_barcodes
    values:
      float: true
  - name: CRISPR_feature_bc_extracted_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_feature_bc_extracted_frac_in_filtered_barcodes
    values:
      float: true
  - name: CRISPR_feature_reads_in_cells
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_feature_reads_in_cells
    values:
      float: true
  - name: CRISPR_frac_cells_with_multiple_protospacer
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_frac_cells_with_multiple_protospacer
    values:
      float: true
  - name: CRISPR_frac_cells_with_protospacer
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_frac_cells_with_protospacer
    values:
      float: true
  - name: CRISPR_multi_filtered_bcs
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_multi_filtered_bcs
    values:
      float: true
  - name: CRISPR_multi_filtered_bcs_median_counts
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_multi_filtered_bcs_median_counts
    values:
      float: true
  - name: CRISPR_multi_usable_reads_per_filtered_bc
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_multi_usable_reads_per_filtered_bc
    values:
      float: true
  - name: CRISPR_recognized_feature_bc_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_recognized_feature_bc_frac_in_filtered_barcodes
    values:
      float: true
  - name: CRISPR_total_read_pairs_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_total_read_pairs_in_filtered_barcodes
    values:
      float: true
  - name: CRISPR_unrecognized_feature_bc_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: CRISPR_unrecognized_feature_bc_frac_in_filtered_barcodes
    values:
      float: true
  - name: Custom_feature_reads_in_cells
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: Custom_feature_reads_in_cells
    values:
      float: true
  - name: Custom_multi_filtered_bcs
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: Custom_multi_filtered_bcs
    values:
      float: true
  - name: Custom_multi_filtered_bcs_median_counts
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: Custom_multi_filtered_bcs_median_counts
    values:
      float: true
  - name: Custom_multi_usable_reads_per_filtered_bc
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: Custom_multi_usable_reads_per_filtered_bc
    values:
      float: true
  - name: Custom_total_read_pairs_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: Custom_total_read_pairs_in_filtered_barcodes
    values:
      float: true
  - name: estimated_gdna_content
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: estimated_gdna_content
    values:
      float: true
  - name: estimated_gdna_unspliced_threshold
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: estimated_gdna_unspliced_threshold
    values:
      float: true
  - name: filtered_reads_per_filtered_bc
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: filtered_reads_per_filtered_bc
    values:
      float: true
  - name: median_genes_per_singlet
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: median_genes_per_singlet
    values:
      float: true
  - name: median_umi_per_singlet
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: median_umi_per_singlet
    values:
      float: true
  - name: multi_filtered_bcs_conf_mapped_barcoded_reads_cum_frac
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: multi_filtered_bcs_conf_mapped_barcoded_reads_cum_frac
    values:
      float: true
  - name: multi_transcriptome_conf_mapped_reads_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: multi_transcriptome_conf_mapped_reads_frac_in_filtered_barcodes
    values:
      float: true
  - name: multi_transcriptome_half_mapped_reads_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: multi_transcriptome_half_mapped_reads_frac_in_filtered_barcodes
    values:
      float: true
  - name: multi_transcriptome_mapped_reads_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: multi_transcriptome_mapped_reads_frac_in_filtered_barcodes
    values:
      float: true
  - name: multi_transcriptome_split_mapped_reads_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: multi_transcriptome_split_mapped_reads_frac_in_filtered_barcodes
    values:
      float: true
  - name: multi_transcriptome_targeted_conf_mapped_reads_frac_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: multi_transcriptome_targeted_conf_mapped_reads_frac_in_filtered_barcodes
    values:
      float: true
  - name: singlets_assigned_to_other_samples
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: singlets_assigned_to_other_samples
    values:
      float: true
  - name: singlets_assigned_to_this_sample
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: singlets_assigned_to_this_sample
    values:
      float: true
  - name: total_genes_detected
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: total_genes_detected
    values:
      float: true
  - name: total_read_pairs_in_filtered_barcodes
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: total_read_pairs_in_filtered_barcodes
    values:
      float: true
  - name: total_singlets
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: total_singlets
    values:
      float: true
  - name: sample_tags_count
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: sample_tags_count
    values:
      float: true
  - name: sample_multiplexing_method
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: sample_multiplexing_method
    values:
      match:
        - exp: None
        - exp: RTL
        - exp: OH
        - exp: CMO
        - exp: Hashtag
  - name: sample_tags
    groups: sample_metrics
    file_content:
      path: ${sample_metrics}
      json_path: sample_tags
    values:
      match:
        - key: None
          exp: ^$
        - key: multiple_tags
          exp: \|
        # Flex v2 tags
        - exp: A-A01
        - exp: A-A02
        - exp: A-A03
        - exp: A-A04
        - exp: A-A05
        - exp: A-A06
        - exp: A-A07
        - exp: A-A08
        - exp: A-A09
        - exp: A-A10
        - exp: A-A11
        - exp: A-A12
        - exp: A-B01
        - exp: A-B02
        - exp: A-B03
        - exp: A-B04
        - exp: A-B05
        - exp: A-B06
        - exp: A-B07
        - exp: A-B08
        - exp: A-B09
        - exp: A-B10
        - exp: A-B11
        - exp: A-B12
        - exp: A-C01
        - exp: A-C02
        - exp: A-C03
        - exp: A-C04
        - exp: A-C05
        - exp: A-C06
        - exp: A-C07
        - exp: A-C08
        - exp: A-C09
        - exp: A-C10
        - exp: A-C11
        - exp: A-C12
        - exp: A-D01
        - exp: A-D02
        - exp: A-D03
        - exp: A-D04
        - exp: A-D05
        - exp: A-D06
        - exp: A-D07
        - exp: A-D08
        - exp: A-D09
        - exp: A-D10
        - exp: A-D11
        - exp: A-D12
        - exp: A-E01
        - exp: A-E02
        - exp: A-E03
        - exp: A-E04
        - exp: A-E05
        - exp: A-E06
        - exp: A-E07
        - exp: A-E08
        - exp: A-E09
        - exp: A-E10
        - exp: A-E11
        - exp: A-E12
        - exp: A-F01
        - exp: A-F02
        - exp: A-F03
        - exp: A-F04
        - exp: A-F05
        - exp: A-F06
        - exp: A-F07
        - exp: A-F08
        - exp: A-F09
        - exp: A-F10
        - exp: A-F11
        - exp: A-F12
        - exp: A-G01
        - exp: A-G02
        - exp: A-G03
        - exp: A-G04
        - exp: A-G05
        - exp: A-G06
        - exp: A-G07
        - exp: A-G08
        - exp: A-G09
        - exp: A-G10
        - exp: A-G11
        - exp: A-G12
        - exp: A-H01
        - exp: A-H02
        - exp: A-H03
        - exp: A-H04
        - exp: A-H05
        - exp: A-H06
        - exp: A-H07
        - exp: A-H08
        - exp: A-H09
        - exp: A-H10
        - exp: A-H11
        - exp: A-H12
        - exp: B-A01
        - exp: B-A02
        - exp: B-A03
        - exp: B-A04
        - exp: B-A05
        - exp: B-A06
        - exp: B-A07
        - exp: B-A08
        - exp: B-A09
        - exp: B-A10
        - exp: B-A11
        - exp: B-A12
        - exp: B-B01
        - exp: B-B02
        - exp: B-B03
        - exp: B-B04
        - exp: B-B05
        - exp: B-B06
        - exp: B-B07
        - exp: B-B08
        - exp: B-B09
        - exp: B-B10
        - exp: B-B11
        - exp: B-B12
        - exp: B-C01
        - exp: B-C02
        - exp: B-C03
        - exp: B-C04
        - exp: B-C05
        - exp: B-C06
        - exp: B-C07
        - exp: B-C08
        - exp: B-C09
        - exp: B-C10
        - exp: B-C11
        - exp: B-C12
        - exp: B-D01
        - exp: B-D02
        - exp: B-D03
        - exp: B-D04
        - exp: B-D05
        - exp: B-D06
        - exp: B-D07
        - exp: B-D08
        - exp: B-D09
        - exp: B-D10
        - exp: B-D11
        - exp: B-D12
        - exp: B-E01
        - exp: B-E02
        - exp: B-E03
        - exp: B-E04
        - exp: B-E05
        - exp: B-E06
        - exp: B-E07
        - exp: B-E08
        - exp: B-E09
        - exp: B-E10
        - exp: B-E11
        - exp: B-E12
        - exp: B-F01
        - exp: B-F02
        - exp: B-F03
        - exp: B-F04
        - exp: B-F05
        - exp: B-F06
        - exp: B-F07
        - exp: B-F08
        - exp: B-F09
        - exp: B-F10
        - exp: B-F11
        - exp: B-F12
        - exp: B-G01
        - exp: B-G02
        - exp: B-G03
        - exp: B-G04
        - exp: B-G05
        - exp: B-G06
        - exp: B-G07
        - exp: B-G08
        - exp: B-G09
        - exp: B-G10
        - exp: B-G11
        - exp: B-G12
        - exp: B-H01
        - exp: B-H02
        - exp: B-H03
        - exp: B-H04
        - exp: B-H05
        - exp: B-H06
        - exp: B-H07
        - exp: B-H08
        - exp: B-H09
        - exp: B-H10
        - exp: B-H11
        - exp: B-H12
        - exp: C-A01
        - exp: C-A02
        - exp: C-A03
        - exp: C-A04
        - exp: C-A05
        - exp: C-A06
        - exp: C-A07
        - exp: C-A08
        - exp: C-A09
        - exp: C-A10
        - exp: C-A11
        - exp: C-A12
        - exp: C-B01
        - exp: C-B02
        - exp: C-B03
        - exp: C-B04
        - exp: C-B05
        - exp: C-B06
        - exp: C-B07
        - exp: C-B08
        - exp: C-B09
        - exp: C-B10
        - exp: C-B11
        - exp: C-B12
        - exp: C-C01
        - exp: C-C02
        - exp: C-C03
        - exp: C-C04
        - exp: C-C05
        - exp: C-C06
        - exp: C-C07
        - exp: C-C08
        - exp: C-C09
        - exp: C-C10
        - exp: C-C11
        - exp: C-C12
        - exp: C-D01
        - exp: C-D02
        - exp: C-D03
        - exp: C-D04
        - exp: C-D05
        - exp: C-D06
        - exp: C-D07
        - exp: C-D08
        - exp: C-D09
        - exp: C-D10
        - exp: C-D11
        - exp: C-D12
        - exp: C-E01
        - exp: C-E02
        - exp: C-E03
        - exp: C-E04
        - exp: C-E05
        - exp: C-E06
        - exp: C-E07
        - exp: C-E08
        - exp: C-E09
        - exp: C-E10
        - exp: C-E11
        - exp: C-E12
        - exp: C-F01
        - exp: C-F02
        - exp: C-F03
        - exp: C-F04
        - exp: C-F05
        - exp: C-F06
        - exp: C-F07
        - exp: C-F08
        - exp: C-F09
        - exp: C-F10
        - exp: C-F11
        - exp: C-F12
        - exp: C-G01
        - exp: C-G02
        - exp: C-G03
        - exp: C-G04
        - exp: C-G05
        - exp: C-G06
        - exp: C-G07
        - exp: C-G08
        - exp: C-G09
        - exp: C-G10
        - exp: C-G11
        - exp: C-G12
        - exp: C-H01
        - exp: C-H02
        - exp: C-H03
        - exp: C-H04
        - exp: C-H05
        - exp: C-H06
        - exp: C-H07
        - exp: C-H08
        - exp: C-H09
        - exp: C-H10
        - exp: C-H11
        - exp: C-H12
        - exp: D-A01
        - exp: D-A02
        - exp: D-A03
        - exp: D-A04
        - exp: D-A05
        - exp: D-A06
        - exp: D-A07
        - exp: D-A08
        - exp: D-A09
        - exp: D-A10
        - exp: D-A11
        - exp: D-A12
        - exp: D-B01
        - exp: D-B02
        - exp: D-B03
        - exp: D-B04
        - exp: D-B05
        - exp: D-B06
        - exp: D-B07
        - exp: D-B08
        - exp: D-B09
        - exp: D-B10
        - exp: D-B11
        - exp: D-B12
        - exp: D-C01
        - exp: D-C02
        - exp: D-C03
        - exp: D-C04
        - exp: D-C05
        - exp: D-C06
        - exp: D-C07
        - exp: D-C08
        - exp: D-C09
        - exp: D-C10
        - exp: D-C11
        - exp: D-C12
        - exp: D-D01
        - exp: D-D02
        - exp: D-D03
        - exp: D-D04
        - exp: D-D05
        - exp: D-D06
        - exp: D-D07
        - exp: D-D08
        - exp: D-D09
        - exp: D-D10
        - exp: D-D11
        - exp: D-D12
        - exp: D-E01
        - exp: D-E02
        - exp: D-E03
        - exp: D-E04
        - exp: D-E05
        - exp: D-E06
        - exp: D-E07
        - exp: D-E08
        - exp: D-E09
        - exp: D-E10
        - exp: D-E11
        - exp: D-E12
        - exp: D-F01
        - exp: D-F02
        - exp: D-F03
        - exp: D-F04
        - exp: D-F05
        - exp: D-F06
        - exp: D-F07
        - exp: D-F08
        - exp: D-F09
        - exp: D-F10
        - exp: D-F11
        - exp: D-F12
        - exp: D-G01
        - exp: D-G02
        - exp: D-G03
        - exp: D-G04
        - exp: D-G05
        - exp: D-G06
        - exp: D-G07
        - exp: D-G08
        - exp: D-G09
        - exp: D-G10
        - exp: D-G11
        - exp: D-G12
        - exp: D-H01
        - exp: D-H02
        - exp: D-H03
        - exp: D-H04
        - exp: D-H05
        - exp: D-H06
        - exp: D-H07
        - exp: D-H08
        - exp: D-H09
        - exp: D-H10
        - exp: D-H11
        - exp: D-H12
        # Flex v1
        - exp: BC001
        - exp: BC002
        - exp: BC003
        - exp: BC004
        - exp: BC005
        - exp: BC006
        - exp: BC007
        - exp: BC008
        - exp: BC009
        - exp: BC010
        - exp: BC011
        - exp: BC012
        - exp: BC013
        - exp: BC014
        - exp: BC015
        - exp: BC016
        - exp: AB001
        - exp: AB002
        - exp: AB003
        - exp: AB004
        - exp: AB005
        - exp: AB006
        - exp: AB007
        - exp: AB008
        - exp: AB009
        - exp: AB010
        - exp: AB011
        - exp: AB012
        - exp: AB013
        - exp: AB014
        - exp: AB015
        - exp: AB016
        # OCM
        - exp: OB1
        - exp: OB2
        - exp: OB3
        - exp: OB4
        # CMO
        - exp: CMO301
        - exp: CMO302
        - exp: CMO303
        - exp: CMO304
        - exp: CMO305
        - exp: CMO306
        - exp: CMO307
        - exp: CMO308
        - exp: CMO309
        - exp: CMO310
        - exp: CMO311
        - exp: CMO312

  # VDJ sample-level metrics

  - name: IGH_vdj_assembly_prod_cdr_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGH_vdj_assembly_prod_cdr_bc_frac
    values:
      float: true
  - name: IGH_vdj_assembly_umis_per_cell_median
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGH_vdj_assembly_umis_per_cell_median
    values:
      float: true
  - name: IGK_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGK_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac
    values:
      float: true
  - name: IGK_vdj_assembly_prod_cdr_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGK_vdj_assembly_prod_cdr_bc_frac
    values:
      float: true
  - name: IGK_vdj_assembly_umis_per_cell_median
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGK_vdj_assembly_umis_per_cell_median
    values:
      float: true
  - name: IGL_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGL_IGH_vdj_assembly_contig_pair_productive_full_len_bc_frac
    values:
      float: true
  - name: IGL_vdj_assembly_prod_cdr_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGL_vdj_assembly_prod_cdr_bc_frac
    values:
      float: true
  - name: IGL_vdj_assembly_umis_per_cell_median
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: IGL_vdj_assembly_umis_per_cell_median
    values:
      float: true
  - name: TRA_TRB_vdj_assembly_contig_pair_productive_full_len_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRA_TRB_vdj_assembly_contig_pair_productive_full_len_bc_frac
    values:
      float: true
  - name: TRA_vdj_assembly_prod_cdr_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRA_vdj_assembly_prod_cdr_bc_frac
    values:
      float: true
  - name: TRA_vdj_assembly_umis_per_cell_median
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRA_vdj_assembly_umis_per_cell_median
    values:
      float: true
  - name: TRB_vdj_assembly_prod_cdr_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRB_vdj_assembly_prod_cdr_bc_frac
    values:
      float: true
  - name: TRB_vdj_assembly_umis_per_cell_median
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRB_vdj_assembly_umis_per_cell_median
    values:
      float: true
  - name: TRD_vdj_assembly_prod_cdr_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRD_vdj_assembly_prod_cdr_bc_frac
    values:
      float: true
  - name: TRD_vdj_assembly_umis_per_cell_median
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRD_vdj_assembly_umis_per_cell_median
    values:
      float: true
  - name: TRG_TRD_vdj_assembly_contig_pair_productive_full_len_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRG_TRD_vdj_assembly_contig_pair_productive_full_len_bc_frac
    values:
      float: true
  - name: TRG_vdj_assembly_prod_cdr_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRG_vdj_assembly_prod_cdr_bc_frac
    values:
      float: true
  - name: TRG_vdj_assembly_umis_per_cell_median
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: TRG_vdj_assembly_umis_per_cell_median
    values:
      float: true
  - name: multi_raw_vdj_paired_clonotype_diversity
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: multi_raw_vdj_paired_clonotype_diversity
    values:
      float: true
  - name: multi_vdj_assembly_contig_pair_productive_full_len_bc_count
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: multi_vdj_assembly_contig_pair_productive_full_len_bc_count
    values:
      float: true
  - name: multi_vdj_assembly_contig_pair_productive_full_len_bc_frac
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: multi_vdj_assembly_contig_pair_productive_full_len_bc_frac
    values:
      float: true
  - name: vdj_filtered_bcs
    groups: sample_metrics_vdj
    file_content:
      path: ${vdj_sample_metrics}
      json_path: vdj_filtered_bcs
    values:
      float: true
